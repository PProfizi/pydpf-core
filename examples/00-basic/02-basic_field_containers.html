
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Field and Field Containers Overview &#8212; PyANSYS DPF 0.2.1 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/ansys.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery-rendered-html.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Transient Analysis Result Example" href="../01-static-transient/00-basic_transient.html" />
    <link rel="prev" title="Operators Overview" href="01-basic_operators.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main">
<div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/pyansys-logo-black-cropped.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started/index.html">Getting Started</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../user_guide/index.html">User Guide</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../operator_reference.html">Operators</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">Examples Gallery</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../contributing.html">Contributing</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/pyansys/DPF-Core" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">

    <div class="bd-toc-item active">
    
  
    <ul class="nav bd-sidenav">
        
        
        
        
        
        
        
        
        
        
          
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#" class="nav-link">Field and Field Containers Overview</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#extracting-data-from-a-field" class="nav-link">Extracting data from a field</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-00-basic-02-basic-field-containers-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="field-and-field-containers-overview">
<span id="ref-basic-field-example"></span><span id="sphx-glr-examples-00-basic-02-basic-field-containers-py"></span><h1>Field and Field Containers Overview<a class="headerlink" href="#field-and-field-containers-overview" title="Permalink to this headline">Â¶</a></h1>
<p>Overview of the usage of fields and field containers in DPF.</p>
<p>The field is the main simulation data container. In numerical
simulations, results data are defined by values associated to entities
(scoping), and these entities are a subset of a model (support).</p>
<p>In DPF, field data is always associated to its scoping and support,
making the field a self-describing piece of data. A field is also
defined by its dimensionnality, unit, location, etc.  A field can for
example, describe a displacement vector or norm, stresses and strains
tensors, stresses and strains equivalent, or the minimum and maximum
over time of any result.  It can be defined on a complete model or
just on certain entities of the model based on its scoping. The data
is stored as a vector of double values and each elementary entity has
a number of components.  For example, displacement will have 3
components, a symmetrical stress matrix will have 6.</p>
<p>A fields container is simply a collection of fields that can be
indexed just like a Python list.  Operators applied to a fields
container will have each individual field operated on.  Fields
containers are output from operators.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">ansys.dpf</span> <span class="kn">import</span> <span class="n">core</span> <span class="k">as</span> <span class="n">dpf</span>
<span class="kn">from</span> <span class="nn">ansys.dpf.core</span> <span class="kn">import</span> <span class="n">examples</span>
</pre></div>
</div>
<p>First, create a model object to establish a connection with an
example result file and then extract</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">Model</span><span class="p">(</span><span class="n">examples</span><span class="o">.</span><span class="n">static_rst</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF Model
------------------------------
Static analysis
Unit system: Metric (m, kg, N, s, V, A)
Physics Type: Mecanic
Available results:
     -  displacement
     -  force
     -  stress
     -  volume
     -  energy_stiffness_matrix
     -  hourglass_energy
     -  thermal_dissipation_energy
     -  kinetic_energy
     -  co_energy
     -  incremental_energy
     -  strain
     -  temperature
------------------------------
Meshed Region
        81 nodes
        8 elements
        Unit: m
------------------------------
Time/Frequency Info:
        Number of sets: 1

With complex values

 Cumulative      Time (s)       Loadstep     Substep
     1             1.0             1            1
</pre></div>
</div>
<p>Create the displacement operator directly from the <code class="docutils literal notranslate"><span class="pre">results</span></code>
property and extract the displacement fields container.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">disp_op</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">results</span><span class="o">.</span><span class="n">displacement</span><span class="p">()</span>
<span class="n">fields</span> <span class="o">=</span> <span class="n">disp_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">fields_container</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF Field Container with
        1 field(s)
        defined on labels [&#39;time&#39;]
</pre></div>
</div>
<p>A field can be extracted from a fields container by simply indexing
the requested field</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">field</span> <span class="o">=</span> <span class="n">fields</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF displacement_1.s Field
    Location:   Nodal
    Unit:       m
    Num. id(s): 81
    Shape:      (81, 3)
</pre></div>
</div>
</div>
<div class="section" id="extracting-data-from-a-field">
<h1>Extracting data from a field<a class="headerlink" href="#extracting-data-from-a-field" title="Permalink to this headline">Â¶</a></h1>
<p>You can extract all the data from a given field using the <code class="docutils literal notranslate"><span class="pre">data</span></code>
property.  This returns a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[[-3.31904602e-22 -6.93565975e-09 -3.28617350e-22]
 [ 2.23026491e-09 -7.14214033e-09 -2.92077883e-22]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-3.01173895e-22 -7.14214033e-09 -2.23026491e-09]
 [ 2.09077164e-09 -7.33058082e-09 -2.09077164e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 1.06212713e-09 -6.89858785e-09 -3.77906905e-22]
 [ 1.89019831e-09 -3.34398104e-09  1.43440783e-23]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.71912713e-23 -2.92690969e-09 -2.33676924e-23]
 [ 1.01364486e-09 -7.10540890e-09 -2.14726184e-09]
 [ 1.89155604e-09 -3.73823999e-09 -1.89155604e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 7.64096553e-24 -3.34398104e-09 -1.89019831e-09]
 [-3.81104389e-22 -6.89858785e-09 -1.06212713e-09]
 [ 2.14726184e-09 -7.10540890e-09 -1.01364486e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-9.53485079e-23 -7.14214033e-09  2.23026491e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 2.09077164e-09 -7.33058082e-09  2.09077164e-09]
 [ 1.18477336e-22 -3.34398104e-09  1.89019831e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 1.89155604e-09 -3.73823999e-09  1.89155604e-09]
 [ 1.01364486e-09 -7.10540890e-09  2.14726184e-09]
 [-2.61320844e-22 -6.89858785e-09  1.06212713e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [ 2.14726184e-09 -7.10540890e-09  1.01364486e-09]
 [-1.54190337e-21 -1.42766633e-08 -1.53720678e-21]
 [ 2.25103522e-09 -1.43688328e-08 -1.55960665e-21]
 [-1.55180700e-21 -1.43688328e-08 -2.25103522e-09]
 [ 2.25860708e-09 -1.44669483e-08 -2.25860708e-09]
 [-1.02704768e-21 -1.05919802e-08 -1.01743770e-21]
 [ 1.16452955e-09 -1.44002311e-08 -1.52834607e-21]
 [ 2.29356739e-09 -1.07400000e-08 -1.07537743e-21]
 [-1.08050063e-21 -1.07400000e-08 -2.29356739e-09]
 [ 1.16046741e-09 -1.44722939e-08 -2.25762828e-09]
 [ 2.26430754e-09 -1.08989140e-08 -2.26430754e-09]
 [-1.50544246e-21 -1.44002311e-08 -1.16452955e-09]
 [ 2.25762828e-09 -1.44722939e-08 -1.16046741e-09]
 [ 2.25860708e-09 -1.44669483e-08  2.25860708e-09]
 [-1.24684037e-21 -1.43688328e-08  2.25103522e-09]
 [ 2.26430754e-09 -1.08989140e-08  2.26430754e-09]
 [ 1.16046741e-09 -1.44722939e-08  2.25762828e-09]
 [-8.03413897e-22 -1.07400000e-08  2.29356739e-09]
 [ 2.25762828e-09 -1.44722939e-08  1.16046741e-09]
 [-1.35051199e-21 -1.44002311e-08  1.16452955e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.23026491e-09 -7.14214033e-09 -9.66448574e-23]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.09077164e-09 -7.33058082e-09 -2.09077164e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-1.89019831e-09 -3.34398104e-09  1.19096032e-22]
 [-1.06212713e-09 -6.89858785e-09 -2.59300974e-22]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-1.89155604e-09 -3.73823999e-09 -1.89155604e-09]
 [-1.01364486e-09 -7.10540890e-09 -2.14726184e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.14726184e-09 -7.10540890e-09 -1.01364486e-09]
 [-2.09077164e-09 -7.33058082e-09  2.09077164e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-1.01364486e-09 -7.10540890e-09  2.14726184e-09]
 [-1.89155604e-09 -3.73823999e-09  1.89155604e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.14726184e-09 -7.10540890e-09  1.01364486e-09]
 [ 0.00000000e+00  0.00000000e+00  0.00000000e+00]
 [-2.25103522e-09 -1.43688328e-08 -1.20291800e-21]
 [-2.25860708e-09 -1.44669483e-08 -2.25860708e-09]
 [-2.29356739e-09 -1.07400000e-08 -7.91446544e-22]
 [-1.16452955e-09 -1.44002311e-08 -1.32988359e-21]
 [-2.26430754e-09 -1.08989140e-08 -2.26430754e-09]
 [-1.16046741e-09 -1.44722939e-08 -2.25762828e-09]
 [-2.25762828e-09 -1.44722939e-08 -1.16046741e-09]
 [-2.25860708e-09 -1.44669483e-08  2.25860708e-09]
 [-1.16046741e-09 -1.44722939e-08  2.25762828e-09]
 [-2.26430754e-09 -1.08989140e-08  2.26430754e-09]
 [-2.25762828e-09 -1.44722939e-08  1.16046741e-09]]
</pre></div>
</div>
<p>While it might seem preferable to work entirely within <code class="docutils literal notranslate"><span class="pre">numpy</span></code>,
realize that DPF runs outside of Python and potentially even on a
remote machine.  Therefore, the transfer of unnecessary data between
the DPF instance and the Python client will lead to inefficient
operations on large models.  Instead, use DPF operators to assemble
the necessary data before recalling the data from DPF.</p>
<p>For example, if you want the maximum displacement for a given
result, use the min/max operator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">min_max_op</span> <span class="o">=</span> <span class="n">dpf</span><span class="o">.</span><span class="n">operators_helper</span><span class="o">.</span><span class="n">min_max</span><span class="p">(</span><span class="n">field</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">min_max_op</span><span class="o">.</span><span class="n">outputs</span><span class="o">.</span><span class="n">field_max</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Out of conveience, you can simply take the max of the field with:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">max</span><span class="p">()</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># Which all yield an identical result as:</span>
<span class="nb">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">field</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[2.29356739e-09 0.00000000e+00 2.29356739e-09]
[2.29356739e-09 0.00000000e+00 2.29356739e-09]
[2.29356739e-09 0.00000000e+00 2.29356739e-09]
</pre></div>
</div>
<p>Note that the numpy array does not retain any information about the
field it describes.  Using the DPF max operator of the field does
retain this information.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">max_field</span> <span class="o">=</span> <span class="n">field</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">max_field</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>DPF displacement_1.s Field
    Location:   Nodal
    Unit:       m
    Num. id(s): 3
    Shape:      3
</pre></div>
</div>
<p>Including the Node IDs of the maximum displacements:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Node IDs of maximum X, Y, and Z displacement:&#39;</span><span class="p">,</span> <span class="n">max_field</span><span class="o">.</span><span class="n">scoping</span><span class="o">.</span><span class="n">ids</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>Node IDs of maximum X, Y, and Z displacement: [75, 14, 40]
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.086 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-00-basic-02-basic-field-containers-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/a8e77fe1835096ace5bc3553cf6f57ae/02-basic_field_containers.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">02-basic_field_containers.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/d12c1e09acc971bdf13d808a94e0ea4b/02-basic_field_containers.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">02-basic_field_containers.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="01-basic_operators.html" title="previous page">Operators Overview</a>
    <a class='right-next' id="next-link" href="../01-static-transient/00-basic_transient.html" title="next page">Transient Analysis Result Example</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.3da636dd464baa7582d2.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2021, ANSYS.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.4.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>